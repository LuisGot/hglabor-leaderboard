<div class="min-h-screen bg-white dark:bg-neutral-900 relative overflow-hidden">
  <div class="flex justify-center my-8 opacity-0 animate-fade-in">
    <img
      src="assets/images/norisk-logo.png"
      alt="NoRisk"
      class="h-32 pixelated opacity-0 animate-bounce-in"
    />
  </div>

  <div
    class="container mx-auto px-4 opacity-0 animate-fade-in animation-delay-150"
  >
    <div
      class="flex flex-wrap gap-4 mb-8 opacity-0 animate-slide-up animation-delay-300"
    >
      <div class="relative inline-block">
        <select
          [ngModel]="currentSort()"
          (ngModelChange)="fetchLeaderboardData($event)"
          class="btn-primary px-6 pr-12 py-2 appearance-none cursor-pointer"
        >
          <option value="xp">XP</option>
          <option value="kills">Kills</option>
          <option value="deaths">Deaths</option>
          <option value="currentKillStreak">Current Streak</option>
          <option value="highestKillStreak">Highest Streak</option>
          <option value="bounty">Bounty</option>
        </select>
        <div
          class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-white"
        >
          <img
            src="assets/images/icons/dropdown-icon.svg"
            alt="Dropdown arrow"
            class="h-5 w-5"
          />
        </div>
      </div>
    </div>

    <div class="mb-4 opacity-0 animate-slide-up animation-delay-400">
      <input
        type="text"
        [value]="searchTerm()"
        (input)="onSearch($event)"
        placeholder="Search by username..."
        class="w-full px-4 py-2 bg-gray-50 dark:bg-neutral-800 backdrop-blur-sm rounded-lg border-2 border-[#2196F3]/30 focus:outline-none focus:border-[#2196F3] text-gray-800 dark:text-white text-xl"
      />
    </div>

    <div
      class="overflow-x-auto bg-gray-50 dark:bg-neutral-800 backdrop-blur-sm rounded-lg border-2 border-[#2196F3]/30 opacity-0 animate-slide-up animation-delay-500"
    >
      <div *ngIf="isLoading()" class="flex justify-center items-center py-20">
        <div
          class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-[#2196F3]"
        ></div>
      </div>
      <table
        *ngIf="!isLoading()"
        class="w-full border-separate border-spacing-1"
      >
        <thead>
          <tr>
            <th class="table-head">Place</th>
            <th class="table-head">Player</th>
            <th class="table-head">XP</th>
            <th class="table-head">Kills</th>
            <th class="table-head">Deaths</th>
            <th class="table-head">Current Streak</th>
            <th class="table-head">Highest Streak</th>
            <th class="table-head">Bounty</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let player of filteredLeaderboard(); let i = index"
            class="transition-colors hover:bg-[#2196F3]/5 opacity-0 animate-fade-in cursor-pointer"
            [ngStyle]="{ 'animation-delay': i * 40 + 'ms' }"
            [routerLink]="['/player', player.playerId]"
          >
            <td class="table-cell">
              {{ (currentPage() - 1) * 100 + i + 1 }}
            </td>
            <td class="table-cell">
              <div class="flex flex-row items-center space-x-2">
                <img
                  [src]="player.avatar"
                  alt="{{ player.username }} avatar"
                  class="h-8 w-8 pixelated"
                />
                <span>
                  {{ player.username }}
                </span>
              </div>
            </td>
            <td class="table-cell">{{ player.xp }}</td>
            <td class="table-cell">{{ player.kills }}</td>
            <td class="table-cell">{{ player.deaths }}</td>
            <td class="table-cell">{{ player.currentKillStreak }}</td>
            <td class="table-cell">{{ player.highestKillStreak }}</td>
            <td class="table-cell">{{ player.bounty }}</td>
          </tr>
        </tbody>
      </table>
      <div class="flex justify-center items-center gap-4 p-4">
        <button
          (click)="previousPage()"
          [disabled]="currentPage() === 1"
          class="btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          Previous
        </button>
        <span class="text-xl text-gray-800 dark:text-white">
          Page {{ currentPage() }}
        </span>
        <button (click)="nextPage()" class="btn-primary px-6 py-2">Next</button>
      </div>
    </div>
  </div>
</div>
